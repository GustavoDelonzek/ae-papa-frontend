<div class="documents-container">
  <!-- Header com filtros -->
  <div class="documents-header">
    <div class="filters-section">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" [(ngModel)]="searchTerm" placeholder="Buscar por nome do arquivo..."
          (keyup.enter)="applyFilters()">
      </div>

      <div class="filter-group">
        <select [(ngModel)]="statusFilter" (change)="applyFilters()">
          <option value="">Todos os status</option>
          <option value="completed">Enviado</option>
          <option value="pending">Pendente</option>
          <option value="failed">Falhou</option>
        </select>
      </div>

      <button class="btn-filter" (click)="applyFilters()">
        <i class="fas fa-filter"></i> Filtrar
      </button>

      <button class="btn-clear" (click)="clearFilters()" *ngIf="statusFilter || searchTerm">
        <i class="fas fa-times"></i> Limpar
      </button>
    </div>

    <button class="btn-upload" (click)="uploadNewDocument()">
      <i class="fas fa-upload"></i> Upload
    </button>
  </div>

  <!-- Loading state -->
  <div class="loading-container" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Carregando documentos...</p>
  </div>

  <!-- Error state -->
  <div class="error-container" *ngIf="errorMessage && !loading">
    <i class="fas fa-exclamation-circle"></i>
    <p>{{ errorMessage }}</p>
    <button class="btn-retry" (click)="loadDocuments()">
      <i class="fas fa-redo"></i> Tentar novamente
    </button>
  </div>

  <!-- Documents list -->
  <div class="documents-list" *ngIf="!loading && !errorMessage && documents.length > 0">
    <div class="document-card" *ngFor="let doc of documents">
      <div class="document-icon">
        <i class="fas" [ngClass]="getFileIcon(doc.mime_type)"></i>
      </div>

      <div class="document-info">
        <div class="document-name">{{ doc.file_name }}</div>
        <div class="document-meta">
          <span class="meta-item">
            <i class="fas fa-calendar"></i>
            {{ formatDate(doc.created_at) }}
          </span>
          <span class="meta-item" *ngIf="doc.document_type">
            <i class="fas fa-tag"></i>
            {{ doc.document_type }}
          </span>
        </div>
        <div class="document-description" *ngIf="doc.description">
          {{ doc.description }}
        </div>
      </div>

      <div class="document-status">
        <span class="status-badge" [ngClass]="getStatusClass(doc.status)">
          {{ getStatusText(doc.status) }}
        </span>
      </div>

      <div class="document-actions">
        <button class="btn-action" (click)="openDocument(doc)" title="Visualizar"
          [disabled]="doc.status !== 'completed'">
          <i class="fas fa-eye"></i>
        </button>

        <button class="btn-action btn-delete" (click)="deleteDocument(doc)" title="Excluir">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="!loading && !errorMessage && documents.length === 0">
    <i class="fas fa-folder-open"></i>
    <h3>Nenhum documento encontrado</h3>
    <p *ngIf="statusFilter || searchTerm">Tente ajustar os filtros ou fazer uma nova busca</p>
    <p *ngIf="!statusFilter && !searchTerm">Ainda não há documentos para este paciente</p>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="!loading && documents.length > 0 && lastPage > 1">
    <div class="pagination-info">
      Mostrando {{ documents.length }} de {{ total }} documentos
    </div>
    <div class="pagination-controls">
      <button class="btn-page" (click)="currentPage > 1 && loadDocuments()" [disabled]="currentPage === 1">
        <i class="fas fa-chevron-left"></i>
      </button>
      <span class="page-info">Página {{ currentPage }} de {{ lastPage }}</span>
      <button class="btn-page" (click)="currentPage < lastPage && loadDocuments()"
        [disabled]="currentPage === lastPage">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
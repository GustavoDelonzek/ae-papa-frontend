<app-sidebar></app-sidebar>

<div class="dashboard-container">
  <div class="dashboard-content">
    <!-- Header -->
    <div class="dashboard-header">
      <div class="welcome-section">
        <h1>Bem-vindo ao AEPAPA</h1>
        <p class="subtitle">Visão geral do sistema de gerenciamento</p>
      </div>
      <div class="date-display">
        <i class="fas fa-calendar-alt"></i>
        {{ getCurrentDateFormatted() }}
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
          <h3>{{ loading ? '...' : totalPatients }}</h3>
          <p>Total de Atendidos</p>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div class="stat-content">
          <h3>{{ loading ? '...' : appointmentsToday }}</h3>
          <p>Consultas Hoje</p>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">
          <i class="fas fa-tasks"></i>
        </div>
        <div class="stat-content">
          <h3>{{ loading ? '...' : pendingTasks }}</h3>
          <p>Tarefas Pendentes</p>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="stat-content">
          <h3>{{ loading ? '...' : recentActivity }}</h3>
          <p>Atividades Recentes</p>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Left Section: Quick Actions & Recent -->
      <div class="left-section">
        <!-- Quick Actions - New Style -->
        <div class="card quick-actions">
          <div class="card-header">
            <i class="fas fa-bolt header-icon"></i>
            <h2>Ações Rápidas</h2>
          </div>
          <div class="card-body">
            <div class="actions-grid-new">
              <div class="action-card-new" (click)="navigateToRegister()">
                <div class="action-icon-new">
                  <i class="fas fa-user-plus"></i>
                </div>
                <span class="action-label-new">Cadastrar<br>Atendido</span>
              </div>

              <div class="action-card-new" (click)="navigateToAppointmentsCreate()">
                <div class="action-icon-new">
                  <i class="fas fa-folder-plus"></i>
                </div>
                <span class="action-label-new">Nova<br>Consulta</span>
              </div>

              <div class="action-card-new" (click)="navigateToPatients()">
                <div class="action-icon-new">
                  <i class="fas fa-users"></i>
                </div>
                <span class="action-label-new">Ver<br>Pacientes</span>
              </div>

              <div class="action-card-new">
                <div class="action-icon-new">
                  <i class="fas fa-brain"></i>
                </div>
                <span class="action-label-new">Evolução<br>Cognitiva</span>
              </div>

              <div class="action-card-new">
                <div class="action-icon-new">
                  <i class="fas fa-pills"></i>
                </div>
                <span class="action-label-new">Registrar<br>Medicamento</span>
              </div>

              <div class="action-card-new">
                <div class="action-icon-new">
                  <i class="fas fa-chart-bar"></i>
                </div>
                <span class="action-label-new">Gerar<br>Relatórios</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="card recent-activity">
          <div class="card-header">
            <h2>Atividades Recentes</h2>
          </div>
          <div class="card-body">
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-icon success">
                  <i class="fas fa-user-check"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-title">Novo Atendido cadastrado</p>
                  <p class="activity-time">Há 2 horas</p>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon info">
                  <i class="fas fa-calendar"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-title">Consulta agendada</p>
                  <p class="activity-time">Há 3 horas</p>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon warning">
                  <i class="fas fa-edit"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-title">Prontuário atualizado</p>
                  <p class="activity-time">Há 5 horas</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Section: Calendar -->
      <div class="right-section">
        <div class="card calendar-card">
          <div class="card-header">
            <i class="fas fa-calendar-alt header-icon"></i>
            <h2>AGENDA</h2>
          </div>
          <div class="card-body">
            <div class="calendar">
              <!-- Calendar Navigation -->
              <div class="calendar-nav">
                <div class="month-year">
                  <span class="month">{{ currentMonth }}</span>
                  <span class="year">{{ currentYear }}</span>
                </div>
                <div class="nav-buttons">
                  <button class="nav-btn" (click)="previousMonth()" title="Mês anterior">
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  <button class="nav-btn" (click)="nextMonth()" title="Próximo mês">
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>

              <!-- Today Button -->
              <div class="calendar-actions" *ngIf="!isCurrentMonth()">
                <button class="today-btn" (click)="goToToday()">
                  <i class="fas fa-calendar-day"></i> Ir para hoje
                </button>
              </div>

              <!-- Weekday Headers -->
              <div class="calendar-weekdays">
                <div class="weekday">D</div>
                <div class="weekday">S</div>
                <div class="weekday">T</div>
                <div class="weekday">Q</div>
                <div class="weekday">Q</div>
                <div class="weekday">S</div>
                <div class="weekday">S</div>
              </div>

              <!-- Calendar Days -->
              <div class="calendar-days">
                <div *ngFor="let dayData of calendarDays" class="calendar-day" [class.today]="dayData.isToday"
                  [class.selected]="dayData.isSelected" [class.other-month]="!dayData.isCurrentMonth"
                  (click)="selectDate(dayData)">
                  {{ dayData.day }}
                </div>
              </div>

              <!-- Selected Date Info -->
              <div class="selected-date-info" *ngIf="selectedDate">
                <p class="date-text">
                  <i class="fas fa-calendar-day"></i>
                  {{ getFormattedSelectedDate() }}
                </p>
                <p class="events-text">Nenhum evento agendado</p>
              </div>

              <!-- No Selection Message -->
              <div class="no-selection-info" *ngIf="!selectedDate">
                <p class="hint-text">
                  <i class="fas fa-hand-pointer"></i>
                  Clique em um dia para ver os detalhes
                </p>
              </div>
            </div>

            <!-- Próximos Alertas -->
            <div class="alerts-section">
              <div class="alerts-header">
                <i class="fas fa-bell"></i>
                <h3>PRÓXIMOS ALERTAS</h3>
              </div>
              <div class="alerts-list">
                <div class="alert-item urgent">
                  <div class="alert-indicator"></div>
                  <div class="alert-time">14:00</div>
                  <div class="alert-content">
                    <span class="alert-title">Insulina - Sr. João</span>
                    <span class="alert-description">Verificar glicemia antes.</span>
                  </div>
                  <span class="alert-badge">URGENTE</span>
                </div>
                <div class="alert-item warning">
                  <div class="alert-indicator"></div>
                  <div class="alert-time">15:30</div>
                  <div class="alert-content">
                    <span class="alert-title">Neurologista - D. Maria</span>
                    <span class="alert-description">Levar exames recentes.</span>
                  </div>
                </div>
                <div class="alert-item">
                  <div class="alert-indicator"></div>
                  <div class="alert-time">17:00</div>
                  <div class="alert-content">
                    <span class="alert-title">Troca de Turno</span>
                    <span class="alert-description">Enfermeira Julia assume.</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>